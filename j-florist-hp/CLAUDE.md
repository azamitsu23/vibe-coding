# 要件定義書 — 葬儀専門のお花屋さんホームページ

> 技術スタック：Next.js (App Router, Server Components 優先), Notion API（CMS）, Tailwind CSS, Vercel, Framer Motion

---

## 1. プロジェクト概要

葬儀向けに特化したフラワーショップの公式サイトを構築する。主目的は以下。

- 葬儀・法要向け花のカタログ表示と問い合わせ受付
- 迅速かつ信頼できる情報提供（式場別の対応、納期、価格帯）
- 検索エンジン最適化（地域 SEO、構造化データ）
- 管理者が Notion を介してコンテンツ（商品、記事）を更新できる CMS 機能

ターゲット：葬儀を控えたご遺族、葬儀社の担当者、寺院・式場担当

---

## 2. 目標（Success Criteria）

- SEO 経由での問い合わせ数向上（3 ヶ月で計測）
- ページ表示速度：Lighthouse Performance ≥ 90（主要ページ）
- Notion 経由でお知らせ・カタログを編集可能
- モバイル UX 良好（スマホ利用を前提）

---

## 3. ページ構成

1. **トップページ**

   - ブランド紹介、主要サービスリンク、最新のお知らせ、問い合わせ CTA

2. **お知らせ**

   - Notion の「お知らせデータベース」から一覧表示
   - 各記事は個別詳細ページで閲覧可能

3. **サービス内容**

   - 葬儀花の種類、提供範囲、配達エリアなどを紹介

4. **アクセス**

   - 店舗所在地、地図（Google Map 埋め込み）、営業時間

5. **商品カタログ**

   - Notion の「カタログデータベース」から商品一覧を取得・表示
   - カテゴリ別（供花、祭壇花、枕花など）にフィルタリング可能

6. **商品カタログ詳細**

   - 各商品の詳細情報（価格、サイズ、説明、写真）を表示
   - 問い合わせボタン設置

7. **お問い合わせ**
   - 名前、電話番号、メールアドレス、希望内容、備考
   - フォーム送信後、サーバーサイドでメール送信（外部 API or FormSubmit など）

---

## 4. 機能一覧

### 4.1 お問い合わせフォーム

- 入力項目：名前、電話番号、メール、問い合わせ内容、自由記述
- バリデーション：必須入力・形式チェック
- フォーム送信時にメール送信処理（Next.js Server Action）

### 4.2 CMS 機能（Notion API 連携）

- **お知らせ管理**：Notion のデータベースから自動取得・一覧表示
- **商品カタログ管理**：Notion データベースから商品情報を取得
- Notion 側で更新 → サイトに即時反映（ISR または定期 revalidate）
- 管理画面は不要（Notion が CMS として機能）

---

## 5. 技術構成・レンダリング方針

- **Next.js App Router**を採用し、**Server Components**を優先
- **API Routes は使用しない**（Server Actions で処理）
- **データ取得**：Notion API から静的生成（SSG）+ ISR で再生成
  - トップ・お知らせ・カタログページは ISR（revalidate: 60〜300 秒程度）
  - お問い合わせページは SSR でレンダリング（フォーム送信処理のため）

---

## 6. 状態管理

- ページ全体では不要。フォーム入力やモーダル表示など一時的な状態のみ。
- 必要な場合は Zustand または React Hooks のローカルステートで対応。

---

## 7. CMS（Notion API）構成案

### Notion データベース構成

#### お知らせ DB

- title: 記事タイトル
- slug: 一意識別子
- content: 本文
- published: 公開フラグ
- published_at: 公開日時

#### カタログ DB

- name: 商品名
- category: カテゴリ（供花、祭壇花など）
- price: 価格帯
- description: 詳細説明
- image_url: 画像 URL
- content: 記事本文（長文説明）
- is_active: 公開/非公開

---

## 8. SEO・構造化データ

- title / meta description / og:image / twitter カード対応
- JSON-LD で LocalBusiness、Product スキーマを出力
- 地域 SEO（店舗情報・NAP 統一）
- **構造化データ自動生成（Notion のメタ情報拡張）**：第一フェーズに含める

---

## 9. GA4 導入

- Google Analytics 4 を埋め込み、主要ページ（トップ・カタログ・お問い合わせ）のイベントをトラッキング
- Cookie 同意バナーは不要（分析用途限定）

---

## 10. 非機能要件（実装対象）

- **デプロイ**：Vercel（Preview / Production）
- **セキュリティ**：環境変数による Notion トークン管理
- **HTTPS 対応**、Vercel による CDN キャッシュ利用
- **パフォーマンス最適化**：Next.js Image 最適化 + Framer Motion 最小限利用
- **アクセシビリティ**：高齢者利用を意識し、フォントサイズ・コントラストを調整
- **保守性**：型定義（TypeScript）によるエラー検出強化
- **再利用性**：共通 UI コンポーネント（Header, Footer, Card, SectionWrapper）化

---

## 11. UI / デザイン要件

- 洗練されたモダンデザインを採用し、**AI 生成っぽさを感じさせない自然なトーン**。
- **余白・サイズ感・フォントスケールを全ページで統一**し、静けさと信頼感を演出。
- **配色設計（ブランドカラー）**:
  - 背景: 白（#FFFFFF）、ベージュ（#F2ECCE）
  - ポイントカラー: #F2D129（明るい黄色）、#F2A413（橙）
- **トップページファーストビュー**:
  - フルスクリーン画像を使用し、時間経過やフェードインで数枚を切り替える。
  - 花・自然・柔らかい光をテーマにした静かな雰囲気。
- **アニメーション方針**:
  - Framer Motion を用い、**スクロールに応じた自然でさりげない動き**を付与。
  - 出現・フェード・パララックス効果を中心に使用。
- **タイポグラフィ**:
  - 見出し：上品な明朝系（例：Noto Serif JP）
  - 本文：可読性の高いゴシック体（例：Noto Sans JP）

---

## 12. 改善案・ベストプラクティス

1. **CMS 連携の軽量化**：Notion API のキャッシュ層を導入（ISR またはエッジキャッシュ）
2. **Server Components 活用**：データ取得をサーバー側で完結させ、初期ロード高速化
3. **フォーム処理**：Server Actions を使い、API Route 不要化
4. **アクセシビリティ対応**：高齢者利用を意識した UI 設計

---
